---
// Guarda como src/pages/laberinto-pointer.astro
// Laberinto controlado por puntero (mouse/dedo en tablet) arrastrando el cami칩n.
// Movimiento por celdas siguiendo la direcci칩n del puntero, con bloqueo por paredes.
const TRUCK_IMG = "https://cdn.jsdelivr.net/gh/twitter/twemoji/assets/72x72/1f69a.png"; // 游뚴 PNG
---
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Laberinto por puntero - Cami칩n</title>
    <style>
      :root{ 
        --primary: #476ACE; 
        --secondary: #2DB4A5; 
        --dark: #102636; 
        --bg: #0f1419; 
        --panel: #1a2332; 
        --panel-border: #476ACE; 
        --ink: #ffffff; 
        --muted: #94a3b8; 
        --accent: #2DB4A5;
        --hover-primary: #5a7bd8;
        --hover-secondary: #3bc4b3;
      }
      *{ box-sizing:border-box }
      body{ 
        margin:0; 
        min-height:100svh; 
        display:flex; 
        flex-direction:column; 
        align-items:center; 
        justify-content:center; 
        background: var(--bg); 
        color: var(--ink); 
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; 
        padding:1rem; 
      }
      main{ width:100%; max-width:800px; display:flex; flex-direction:column; align-items:center; gap:1.5rem; }
      h1{ 
        font-size:clamp(1.2rem,1.2rem + 1vw,1.8rem); 
        margin:0; 
        text-align:center; 
        color: var(--primary);
        font-weight: 700;
        text-shadow: 0 2px 4px rgba(71, 106, 206, 0.3);
      }
      .panel{ 
        background: var(--panel); 
        border: 2px solid var(--panel-border); 
        border-radius:1rem; 
        padding:1.5rem; 
        box-shadow: 0 12px 30px rgba(16, 38, 54, 0.6), 0 4px 12px rgba(71, 106, 206, 0.2); 
      }
      .boardWrap{ display:flex; flex-direction:column; align-items:center; gap:1rem; }
      canvas{ 
        width:min(90vw,600px); 
        height:min(90vw,600px); 
        max-width:600px; 
        max-height:600px; 
        background: var(--dark); 
        border-radius:1rem; 
        border: 3px solid var(--primary); 
        box-shadow: 0 8px 25px rgba(16, 38, 54, 0.4), inset 0 0 0 1px rgba(71, 106, 206, 0.1); 
        touch-action: none; 
      }
      .controls{ display:flex; gap:1rem; flex-wrap:wrap; justify-content:center; margin-top:1rem; }
      .btn{ 
        background: var(--primary); 
        color: #fff; 
        border: 2px solid var(--primary); 
        padding:.8rem 1.2rem; 
        border-radius:.8rem; 
        cursor:pointer; 
        font-weight:700; 
        font-size:.95rem; 
        transition: all 0.3s ease; 
        box-shadow: 0 4px 12px rgba(71, 106, 206, 0.3);
      }
      .btn:hover{ 
        background: var(--hover-primary); 
        border-color: var(--hover-primary);
        transform: translateY(-2px); 
        box-shadow: 0 6px 18px rgba(71, 106, 206, 0.4);
      }
      .btn.primary{ 
        background: var(--secondary); 
        border-color: var(--secondary); 
        box-shadow: 0 4px 12px rgba(45, 180, 165, 0.3);
      }
      .btn.primary:hover{ 
        background: var(--hover-secondary); 
        border-color: var(--hover-secondary);
        box-shadow: 0 6px 18px rgba(45, 180, 165, 0.4);
      }
      .btn.secondary{ 
        background: var(--dark); 
        border-color: var(--accent);
        color: var(--accent);
        box-shadow: 0 4px 12px rgba(16, 38, 54, 0.3);
      }
      .btn.secondary:hover{ 
        background: var(--accent); 
        border-color: var(--accent);
        color: white;
        box-shadow: 0 6px 18px rgba(45, 180, 165, 0.3);
      }
      .btn:disabled{ opacity:.6; cursor:not-allowed; transform:none; }
      .stats{ 
        display:flex; 
        flex-wrap:wrap; 
        gap:1rem; 
        justify-content:center; 
        color: var(--ink); 
        font-size:.95rem; 
        background: var(--dark);
        padding: 0.8rem 1.2rem;
        border-radius: 0.8rem;
        border: 2px solid var(--accent);
        font-weight: 600;
      }
      .legend{ 
        color: var(--muted); 
        font-size:.9rem; 
        text-align:center; 
        max-width:500px; 
        line-height:1.4; 
        background: var(--panel);
        padding: 1rem;
        border-radius: 0.8rem;
        border: 1px solid var(--primary);
      }
      
      /* Add styles for form controls */
      .select{ 
        background: var(--dark); 
        color: #fff; 
        border: 2px solid var(--primary); 
        padding:.6rem .8rem; 
        border-radius:.6rem; 
        transition: all 0.2s ease;
        font-weight: 500;
      }
      .select:focus {
        outline: none;
        border-color: var(--secondary);
        box-shadow: 0 0 0 3px rgba(45, 180, 165, 0.2);
      }
      label{ 
        display:flex; 
        flex-direction:column; 
        align-items:center; 
        gap:.4rem; 
        font-size:.9rem; 
        color: var(--ink); 
        font-weight: 600;
      }
      
      @media (max-width: 640px) {
        body{ padding:.5rem; }
        .panel{ padding:1rem; }
        .controls{ gap:.5rem; }
        .btn{ padding:.6rem 1rem; font-size:.9rem; }
        h1{ font-size:1.3rem; }
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Laberinto (control por puntero: arrastra el cami칩n 游뚴)</h1>
      <section class="panel boardWrap">
        <canvas id="maze" width="600" height="600" aria-label="Laberinto"></canvas>
        <div class="stats" id="stats"></div>
        
        <!-- Add missing form controls -->
        <div class="controls">
          <label>
            Tama침o: 
            <select id="sizeSel" class="select">
              <option value="10">10x10</option>
              <option value="15" selected>15x15</option>
              <option value="20">20x20</option>
              <option value="25">25x25</option>
            </select>
          </label>
          <label>
            Semilla: 
            <input id="seedInput" type="text" placeholder="Opcional" class="select" style="width: 120px;">
          </label>
          <label>
            Velocidad: 
            <select id="speedSel" class="select">
              <option value="60">Lenta</option>
              <option value="120" selected>Media</option>
              <option value="200">R치pida</option>
            </select>
          </label>
          <input id="truckInput" type="hidden" value="">
        </div>
        
        <div class="controls">
          <button id="newBtn" class="btn primary">Nuevo Juego</button>
          <button id="resetBtn" class="btn secondary">Reiniciar</button>
          <button id="solveBtn" class="btn secondary">Mostrar Soluci칩n</button>
          <button id="menuBtn" class="btn secondary">Regresar al Men칰</button>
        </div>
        <div class="legend">En tablet: mant칠n el dedo sobre el canvas y arr치stralo hacia donde quieras que avance.<br/>No puedes atravesar paredes: si el camino est치 bloqueado, el cami칩n se detiene en la 칰ltima celda v치lida.</div>
      </section>
    </main>
    <script type="module" src="/js/laberinto.js"></script>
  </body>
</html>
