---
// Este archivo puede guardarse como src/pages/rompecabezas.astro
// No requiere React; usa HTML, CSS y JS vanilla dentro de una pÃ¡gina Astro.
// Cambia IMAGE_URL y GRID_SIZE para ajustar.
const IMAGE_URL =
  "https://ramirezgroup.com.pe/wp-content/uploads/2023/06/logo-RAMIREZ-GROUP.png"; // cualquier imagen pÃºblica
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rompecabezas en Astro</title>
    <style>
      :root {
        --size: min(90vmin, 720px);
      }
      body {
        font-family:
          ui-sans-serif,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          "Helvetica Neue",
          Arial,
          "Noto Sans",
          "Apple Color Emoji",
          "Segoe UI Emoji";
        display: grid;
        place-items: center;
        min-height: 100svh;
        margin: 0;
        background: #0b1020;
        color: #f8fafc;
      }
      .app {
        width: min(96vw, 980px);
      }
      h1 {
        font-size: clamp(1.1rem, 2vw + 0.8rem, 1.8rem);
        margin: 1rem 0 0.75rem;
        font-weight: 700;
      }
      .toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        align-items: center;
        margin-bottom: 1rem;
      }
      .btn {
        background: #1f2937;
        color: #fff;
        border: 1px solid #334155;
        padding: 0.6rem 0.9rem;
        border-radius: 0.75rem;
        cursor: pointer;
        font-weight: 600;
      }
      .btn:active {
        transform: translateY(1px);
      }
      .select {
        background: #111827;
        color: #fff;
        border: 1px solid #334155;
        padding: 0.5rem 0.6rem;
        border-radius: 0.6rem;
      }
      .board {
        position: relative;
        width: var(--size);
        height: var(--size);
        display: grid;
        gap: 2px;
        background: #111827;
        border-radius: 1rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
        overflow: hidden;
      }
      .tile {
        position: relative;
        background-size: calc(var(--size)) calc(var(--size));
        background-repeat: no-repeat;
        aspect-ratio: 1/1;
        user-select: none;
        cursor: pointer;
        display: grid;
        place-items: center;
        font-weight: 800;
        color: #fff8;
        transition: box-shadow 0.15s ease;
      }
      .tile:focus-visible {
        outline: 2px solid #60a5fa;
        outline-offset: -2px;
      }
      .tile.correct {
        box-shadow: inset 0 0 0 3px #22c55e;
      }
      .stats {
        display: flex;
        gap: 1rem;
        margin-top: 0.75rem;
        font-size: 0.95rem;
        color: #cbd5e1;
      }
      .preview {
        width: 180px;
        border-radius: 0.75rem;
        overflow: hidden;
        border: 1px solid #334155;
      }
      .wrap {
        display: grid;
        gap: 1rem;
        grid-template-columns: 1fr auto;
        align-items: start;
      }
      .toast {
        position: fixed;
        inset: auto 0 2rem 0;
        margin-inline: auto;
        width: max-content;
        background: #16a34a;
        color: #001106;
        padding: 0.65rem 1rem;
        border-radius: 0.65rem;
        font-weight: 700;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35);
        display: none;
      }
      .toast.show {
        display: block;
      }
      .legend {
        font-size: 0.85rem;
        color: #94a3b8;
      }
      .timer-display {
        font-size: 1.2rem;
        font-weight: 700;
        color: #f59e0b;
        margin-left: auto;
      }
      .timer-display.warning {
        color: #ef4444;
        animation: pulse 1s infinite;
      }
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
      }
      .game-over {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        place-items: center;
        z-index: 1000;
      }
      .game-over.show {
        display: grid;
      }
      .game-over-content {
        background: #1f2937;
        padding: 2rem;
        border-radius: 1rem;
        text-align: center;
        border: 2px solid #ef4444;
      }
      .game-over h2 {
        color: #ef4444;
        margin: 0 0 1rem 0;
        font-size: 1.5rem;
      }
      .game-over p {
        margin: 0 0 1.5rem 0;
        color: #cbd5e1;
      }
      .game-over .btn {
        background: #ef4444;
        border-color: #dc2626;
      }
    </style>
  </head>
  <body>
    <main class="app">
      <h1>Rompecabezas en Astro</h1>
      <div class="toolbar">
        <button id="shuffleBtn" class="btn">Mezclar</button>
        <button id="hintBtn" class="btn"
          >Pista (resaltar piezas correctas)</button
        >
        <label class="legend"
          >TamaÃ±o:
          <select id="gridSelect" class="select">
            <option value="3">3Ã—3</option>
            <option value="4" selected>4Ã—4</option>
            <option value="5">5Ã—5</option>
            <option value="6">6Ã—6</option>
          </select>
        </label>
        <div id="timerDisplay" class="timer-display">20s</div>
      </div>

      <div class="wrap">
        <section>
          <div
            id="board"
            class="board"
            role="grid"
            aria-label="Tablero del rompecabezas"
          >
          </div>
          <div class="stats">
            <div><strong>Movimientos:</strong> <span id="moves">0</span></div>
            <div><strong>Tiempo:</strong> <span id="time">00:00</span></div>
          </div>
        </section>
        <aside>
          <figure class="preview">
            <img
              id="previewImg"
              src={IMAGE_URL}
              alt="PrevisualizaciÃ³n"
              style="width:100%;display:block; background-color:white"
            />
          </figure>
          <p class="legend">
            Haz clic en dos piezas para intercambiarlas. Ordena hasta formar la
            imagen. <strong>Â¡Tienes 20 segundos!</strong>
          </p>
        </aside>
      </div>

      <div id="toast" class="toast">Â¡Completado! ðŸŽ‰</div>
      
      <div id="gameOver" class="game-over">
        <div class="game-over-content">
          <h2>Â¡Tiempo Agotado!</h2>
          <p>No lograste completar el rompecabezas en 20 segundos.</p>
          <button id="restartBtn" class="btn">Intentar de Nuevo</button>
        </div>
      </div>
    </main>
    <script type="module" src="/js/rompecabeza.js"></script>
  </body>
</html>
