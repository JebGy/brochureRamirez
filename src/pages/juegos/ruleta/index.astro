---
// Guarda como src/pages/ruleta.astro
// Ruleta con elementos ponderados por peso. 100% JS/HTML/CSS vanilla.
// Ajusta los items iniciales aquí o edítalos en la UI.
const DEFAULT_ITEMS = [
  { label: 'A', weight: 1 },
  { label: 'B', weight: 2 },
  { label: 'C', weight: 3 },
  { label: 'D', weight: 4 },
];
---
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ruleta ponderada</title>
    <style>
      :root { --size: min(80vmin, 80vh); }
      * { box-sizing: border-box; }
      body{ margin:0; padding:0; min-height:90vmin; display:grid; place-items:center; background:#0b1020; color:#f8fafc; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; }
      main{ width:90vw; height:90vh; padding:0; display:flex; flex-direction:column; justify-content:center; align-items:center; }
      h1{ font-size:clamp(1.5rem,2vw,2.5rem); margin:0 0 1rem; text-align:center; }
      .grid{ display:grid; grid-template-columns: 1fr; gap:0; align-items:center; justify-items:center; width:100%; height:100%; }
      .panel{ background:transparent; border:none; border-radius:0; padding:1rem; box-shadow:none; }
      .controls{ display:grid; gap:.75rem; }
      .row{ display:grid; grid-template-columns: 1fr 120px 100px auto; gap:.5rem; align-items:center; }
      .tbl{ width:100%; border-collapse: collapse; font-size:.95rem; }
      .tbl th,.tbl td{ padding:.4rem .5rem; border-bottom:1px solid #23314f; text-align:left; }
      .tbl th{ color:#9fb3d9; font-weight:700; }
      .tbl td{ color:#dbe4f3; }
      input[type="text"], input[type="number"]{ width:100%; background:#0d1326; color:#e5ecff; border:1px solid #23314f; padding:.5rem .6rem; border-radius:.6rem; }
      input[type="number"]{ text-align:right; }
      .btn{ background:#1f2937; color:#fff; border:1px solid #334155; padding:.8rem 1.2rem; border-radius:.7rem; cursor:pointer; font-weight:700; font-size:1.1rem; }
      .btn:disabled{ opacity:.5; cursor:not-allowed; }
      .btn.secondary{ background:#0d1326; }
      .btn.danger{ background:#7f1d1d; border-color:#b91c1c; }
      .wheelWrap{ display:grid; place-items:center; width:100%; height:100%; }
      .wheelBox{ width:min(80vmin, 80vh); aspect-ratio:1/1; position:relative; }
      .needle{ position:absolute; left:50%; top:0; transform:translate(-50%,-15%); width:0; height:0; border-left:20px solid transparent; border-right:20px solid transparent; border-bottom:32px solid #fbbf24; filter: drop-shadow(0 4px 6px rgba(0,0,0,.4)); z-index:10; }
      svg{ width:100%; height:100%; display:block; }
      #wheel{ transition: transform 3.6s cubic-bezier(.17,.84,.14,.99); transform-origin: 50% 50%; }
      .centerCap{ fill:#0d1326; stroke:#334155; stroke-width:2; }
      .result{ margin-top: 1rem; font-size:1.2rem; text-align:center; }
      .pill{ display:inline-block; padding:.3rem .8rem; border-radius:.6rem; background:#0d1326; border:1px solid #23314f; }
      .history{ max-height: 180px; overflow:auto; border:1px solid #23314f; border-radius:.6rem; padding:.4rem .5rem; }
      .muted{ color:#9fb3d9; font-size:.9rem; }
      .legend{ font-size:.85rem; color:#9fb3d9; }
      
      /* Botones centrados y más grandes */
      .button-container { 
        display:flex; 
        gap:1rem; 
        margin-top:1.5rem; 
        flex-wrap:wrap; 
        justify-content:center;
      }
    </style>
  </head>
  <body>
    <main>
      <div class="grid">
        <section class="panel wheelWrap">
          <div class="wheelBox">
            <div class="needle" aria-hidden="true"></div>
            <svg viewBox="0 0 700 700" role="img" aria-label="Ruleta">
              <g id="wheel" transform="rotate(0 350 350)"></g>
              <circle cx="350" cy="350" r="22" class="centerCap"/>
            </svg>
          </div>

          <div class="button-container">
            <button id="fastBtn" class="btn secondary">Giro rápido ⚡</button>
            <button id="resetBtn" class="btn secondary">Reiniciar</button>
          </div>

          <div id="result" class="result"></div>
        
          <div id="history" class="history" style="margin-top:.5rem;"></div>
        </section>
      </div>
    </main>
    <script type="module" src="/js/ruleta.js"></script>
  </body>
</html>
